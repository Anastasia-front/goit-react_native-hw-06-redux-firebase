{"ast":null,"code":"import _asyncToGenerator from \"@babel/runtime/helpers/asyncToGenerator\";\nimport { useNavigation } from \"@react-navigation/native\";\nimport { createUserWithEmailAndPassword, signInWithEmailAndPassword, onAuthStateChanged, updateProfile } from \"firebase/auth\";\nimport { auth } from \"./config\";\nexport var registerDB = function () {\n  var _ref2 = _asyncToGenerator(function* (_ref) {\n    var email = _ref.email,\n      password = _ref.password;\n    try {\n      yield createUserWithEmailAndPassword(auth, email, password);\n    } catch (error) {\n      throw error;\n    }\n  });\n  return function registerDB(_x) {\n    return _ref2.apply(this, arguments);\n  };\n}();\nexport var authStateChanged = function () {\n  var _ref3 = _asyncToGenerator(function* () {\n    var onChange = arguments.length > 0 && arguments[0] !== undefined ? arguments[0] : function () {};\n    onAuthStateChanged(function (user) {\n      onChange(user);\n    });\n  });\n  return function authStateChanged() {\n    return _ref3.apply(this, arguments);\n  };\n}();\nexport var loginDB = function () {\n  var _ref5 = _asyncToGenerator(function* (_ref4) {\n    var email = _ref4.email,\n      password = _ref4.password;\n    try {\n      var credentials = yield signInWithEmailAndPassword(auth, email, password);\n      return credentials.user;\n    } catch (error) {\n      throw error;\n    }\n  });\n  return function loginDB(_x2) {\n    return _ref5.apply(this, arguments);\n  };\n}();\nexport var updateUserProfile = function () {\n  var _ref6 = _asyncToGenerator(function* (update) {\n    var navigation = useNavigation();\n    var user = auth.currentUser;\n    if (user) {\n      navigation.replace(\"Posts\");\n      try {\n        yield updateProfile(user, update);\n      } catch (error) {\n        throw error;\n      }\n    } else {\n      navigation.replace(\"Login\");\n    }\n  });\n  return function updateUserProfile(_x3) {\n    return _ref6.apply(this, arguments);\n  };\n}();","map":{"version":3,"names":["useNavigation","createUserWithEmailAndPassword","signInWithEmailAndPassword","onAuthStateChanged","updateProfile","auth","registerDB","_ref2","_asyncToGenerator","_ref","email","password","error","_x","apply","arguments","authStateChanged","_ref3","onChange","length","undefined","user","loginDB","_ref5","_ref4","credentials","_x2","updateUserProfile","_ref6","update","navigation","currentUser","replace","_x3"],"sources":["/Users/Anastasia/Desktop/goit-react_native-hw-06-redux-firebase/firebase/authorization.js"],"sourcesContent":["import { useNavigation } from \"@react-navigation/native\";\nimport {\n  createUserWithEmailAndPassword,\n  signInWithEmailAndPassword,\n  onAuthStateChanged,\n  updateProfile,\n} from \"firebase/auth\";\nimport { auth } from \"./config\";\n\nexport const registerDB = async ({ email, password }) => {\n  try {\n    await createUserWithEmailAndPassword(auth, email, password);\n  } catch (error) {\n    throw error;\n  }\n};\n\n// або більш короткий запис цієї функції\n// export const registerDB = ({ email, password }) =>\n//         createUserWithEmailAndPassword(auth, email, password);\n\nexport const authStateChanged = async (onChange = () => {}) => {\n  onAuthStateChanged((user) => {\n    onChange(user);\n  });\n};\n\nexport const loginDB = async ({ email, password }) => {\n  try {\n    const credentials = await signInWithEmailAndPassword(auth, email, password);\n    return credentials.user;\n  } catch (error) {\n    throw error;\n  }\n};\n\nexport const updateUserProfile = async (update) => {\n  const navigation = useNavigation();\n  const user = auth.currentUser;\n\n  // якщо такий користувач знайдений\n  if (user) {\n    navigation.replace(\"Posts\");\n    // оновлюємо його профайл\n    try {\n      await updateProfile(user, update);\n    } catch (error) {\n      throw error;\n    }\n  } else {\n    navigation.replace(\"Login\");\n  }\n};\n"],"mappings":";AAAA,SAASA,aAAa,QAAQ,0BAA0B;AACxD,SACEC,8BAA8B,EAC9BC,0BAA0B,EAC1BC,kBAAkB,EAClBC,aAAa,QACR,eAAe;AACtB,SAASC,IAAI;AAEb,OAAO,IAAMC,UAAU;EAAA,IAAAC,KAAA,GAAAC,iBAAA,CAAG,WAAAC,IAAA,EAA+B;IAAA,IAAtBC,KAAK,GAAAD,IAAA,CAALC,KAAK;MAAEC,QAAQ,GAAAF,IAAA,CAARE,QAAQ;IAChD,IAAI;MACF,MAAMV,8BAA8B,CAACI,IAAI,EAAEK,KAAK,EAAEC,QAAQ,CAAC;IAC7D,CAAC,CAAC,OAAOC,KAAK,EAAE;MACd,MAAMA,KAAK;IACb;EACF,CAAC;EAAA,gBANYN,UAAUA,CAAAO,EAAA;IAAA,OAAAN,KAAA,CAAAO,KAAA,OAAAC,SAAA;EAAA;AAAA,GAMtB;AAMD,OAAO,IAAMC,gBAAgB;EAAA,IAAAC,KAAA,GAAAT,iBAAA,CAAG,aAA+B;IAAA,IAAxBU,QAAQ,GAAAH,SAAA,CAAAI,MAAA,QAAAJ,SAAA,QAAAK,SAAA,GAAAL,SAAA,MAAG,YAAM,CAAC,CAAC;IACxDZ,kBAAkB,CAAC,UAACkB,IAAI,EAAK;MAC3BH,QAAQ,CAACG,IAAI,CAAC;IAChB,CAAC,CAAC;EACJ,CAAC;EAAA,gBAJYL,gBAAgBA,CAAA;IAAA,OAAAC,KAAA,CAAAH,KAAA,OAAAC,SAAA;EAAA;AAAA,GAI5B;AAED,OAAO,IAAMO,OAAO;EAAA,IAAAC,KAAA,GAAAf,iBAAA,CAAG,WAAAgB,KAAA,EAA+B;IAAA,IAAtBd,KAAK,GAAAc,KAAA,CAALd,KAAK;MAAEC,QAAQ,GAAAa,KAAA,CAARb,QAAQ;IAC7C,IAAI;MACF,IAAMc,WAAW,SAASvB,0BAA0B,CAACG,IAAI,EAAEK,KAAK,EAAEC,QAAQ,CAAC;MAC3E,OAAOc,WAAW,CAACJ,IAAI;IACzB,CAAC,CAAC,OAAOT,KAAK,EAAE;MACd,MAAMA,KAAK;IACb;EACF,CAAC;EAAA,gBAPYU,OAAOA,CAAAI,GAAA;IAAA,OAAAH,KAAA,CAAAT,KAAA,OAAAC,SAAA;EAAA;AAAA,GAOnB;AAED,OAAO,IAAMY,iBAAiB;EAAA,IAAAC,KAAA,GAAApB,iBAAA,CAAG,WAAOqB,MAAM,EAAK;IACjD,IAAMC,UAAU,GAAG9B,aAAa,CAAC,CAAC;IAClC,IAAMqB,IAAI,GAAGhB,IAAI,CAAC0B,WAAW;IAG7B,IAAIV,IAAI,EAAE;MACRS,UAAU,CAACE,OAAO,CAAC,OAAO,CAAC;MAE3B,IAAI;QACF,MAAM5B,aAAa,CAACiB,IAAI,EAAEQ,MAAM,CAAC;MACnC,CAAC,CAAC,OAAOjB,KAAK,EAAE;QACd,MAAMA,KAAK;MACb;IACF,CAAC,MAAM;MACLkB,UAAU,CAACE,OAAO,CAAC,OAAO,CAAC;IAC7B;EACF,CAAC;EAAA,gBAhBYL,iBAAiBA,CAAAM,GAAA;IAAA,OAAAL,KAAA,CAAAd,KAAA,OAAAC,SAAA;EAAA;AAAA,GAgB7B"},"metadata":{},"sourceType":"module","externalDependencies":[]}