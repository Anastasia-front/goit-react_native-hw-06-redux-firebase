{"ast":null,"code":"import _asyncToGenerator from \"@babel/runtime/helpers/asyncToGenerator\";\nimport * as ImagePicker from \"expo-image-picker\";\nimport * as MediaLibrary from \"expo-media-library\";\nimport { ActionSheetIOS } from \"react-native-web/dist/index\";\nexport var handleGalleryPress = function () {\n  var _ref2 = _asyncToGenerator(function* (_ref) {\n    var buttonPressCount = _ref.buttonPressCount,\n      setButtonPressCount = _ref.setButtonPressCount,\n      setAvatar = _ref.setAvatar;\n    if (buttonPressCount === 0) {\n      ActionSheetIOS.showActionSheetWithOptions({\n        options: [\"Выбрать из галереи\", \"Отмена\"],\n        cancelButtonIndex: 1\n      }, function () {\n        var _ref3 = _asyncToGenerator(function* (buttonIndex) {\n          if (buttonIndex === 0) {\n            var _yield$ImagePicker$re = yield ImagePicker.requestMediaLibraryPermissionsAsync(),\n              status = _yield$ImagePicker$re.status;\n            if (status === \"granted\") {\n              var result = yield ImagePicker.launchImageLibraryAsync({\n                mediaTypes: ImagePicker.MediaTypeOptions.Images,\n                allowsEditing: true,\n                aspect: [1, 1],\n                quality: 1\n              });\n              if (!result.canceled) {\n                var selectedAsset = yield MediaLibrary.createAssetAsync(result.assets[0].uri);\n                var selectedUri = yield MediaLibrary.getAssetInfoAsync(selectedAsset);\n                setAvatar(selectedUri.uri);\n                setButtonPressCount(1);\n              }\n            }\n          }\n        });\n        return function (_x2) {\n          return _ref3.apply(this, arguments);\n        };\n      }());\n    } else {\n      setAvatar(\"../img/Rectangle-empty.jpg\");\n      setButtonPressCount(0);\n    }\n  });\n  return function handleGalleryPress(_x) {\n    return _ref2.apply(this, arguments);\n  };\n}();","map":{"version":3,"names":["ImagePicker","MediaLibrary","ActionSheetIOS","handleGalleryPress","_ref2","_asyncToGenerator","_ref","buttonPressCount","setButtonPressCount","setAvatar","showActionSheetWithOptions","options","cancelButtonIndex","_ref3","buttonIndex","_yield$ImagePicker$re","requestMediaLibraryPermissionsAsync","status","result","launchImageLibraryAsync","mediaTypes","MediaTypeOptions","Images","allowsEditing","aspect","quality","canceled","selectedAsset","createAssetAsync","assets","uri","selectedUri","getAssetInfoAsync","_x2","apply","arguments","_x"],"sources":["/Users/Anastasia/Desktop/goit-react_native-hw-06-redux-firebase/src/utils/cameraPress.js"],"sourcesContent":["import * as ImagePicker from \"expo-image-picker\";\nimport * as MediaLibrary from \"expo-media-library\";\nimport { ActionSheetIOS } from \"react-native\";\n\nexport const handleGalleryPress = async ({\n  buttonPressCount,\n  setButtonPressCount,\n  setAvatar,\n}) => {\n  if (buttonPressCount === 0) {\n    ActionSheetIOS.showActionSheetWithOptions(\n      {\n        options: [\"Выбрать из галереи\", \"Отмена\"],\n        cancelButtonIndex: 1,\n      },\n      async (buttonIndex) => {\n        if (buttonIndex === 0) {\n          const { status } =\n            await ImagePicker.requestMediaLibraryPermissionsAsync();\n          if (status === \"granted\") {\n            const result = await ImagePicker.launchImageLibraryAsync({\n              mediaTypes: ImagePicker.MediaTypeOptions.Images,\n              allowsEditing: true,\n              aspect: [1, 1],\n              quality: 1,\n            });\n\n            if (!result.canceled) {\n              const selectedAsset = await MediaLibrary.createAssetAsync(\n                result.assets[0].uri\n              );\n              const selectedUri = await MediaLibrary.getAssetInfoAsync(\n                selectedAsset\n              );\n              setAvatar(selectedUri.uri);\n              setButtonPressCount(1);\n            }\n          }\n        }\n      }\n    );\n  } else {\n    setAvatar(\"../img/Rectangle-empty.jpg\");\n    setButtonPressCount(0);\n  }\n};\n"],"mappings":";AAAA,OAAO,KAAKA,WAAW,MAAM,mBAAmB;AAChD,OAAO,KAAKC,YAAY,MAAM,oBAAoB;AAAC,SAC1CC,cAAc;AAEvB,OAAO,IAAMC,kBAAkB;EAAA,IAAAC,KAAA,GAAAC,iBAAA,CAAG,WAAAC,IAAA,EAI5B;IAAA,IAHJC,gBAAgB,GAAAD,IAAA,CAAhBC,gBAAgB;MAChBC,mBAAmB,GAAAF,IAAA,CAAnBE,mBAAmB;MACnBC,SAAS,GAAAH,IAAA,CAATG,SAAS;IAET,IAAIF,gBAAgB,KAAK,CAAC,EAAE;MAC1BL,cAAc,CAACQ,0BAA0B,CACvC;QACEC,OAAO,EAAE,CAAC,oBAAoB,EAAE,QAAQ,CAAC;QACzCC,iBAAiB,EAAE;MACrB,CAAC;QAAA,IAAAC,KAAA,GAAAR,iBAAA,CACD,WAAOS,WAAW,EAAK;UACrB,IAAIA,WAAW,KAAK,CAAC,EAAE;YACrB,IAAAC,qBAAA,SACQf,WAAW,CAACgB,mCAAmC,CAAC,CAAC;cADjDC,MAAM,GAAAF,qBAAA,CAANE,MAAM;YAEd,IAAIA,MAAM,KAAK,SAAS,EAAE;cACxB,IAAMC,MAAM,SAASlB,WAAW,CAACmB,uBAAuB,CAAC;gBACvDC,UAAU,EAAEpB,WAAW,CAACqB,gBAAgB,CAACC,MAAM;gBAC/CC,aAAa,EAAE,IAAI;gBACnBC,MAAM,EAAE,CAAC,CAAC,EAAE,CAAC,CAAC;gBACdC,OAAO,EAAE;cACX,CAAC,CAAC;cAEF,IAAI,CAACP,MAAM,CAACQ,QAAQ,EAAE;gBACpB,IAAMC,aAAa,SAAS1B,YAAY,CAAC2B,gBAAgB,CACvDV,MAAM,CAACW,MAAM,CAAC,CAAC,CAAC,CAACC,GACnB,CAAC;gBACD,IAAMC,WAAW,SAAS9B,YAAY,CAAC+B,iBAAiB,CACtDL,aACF,CAAC;gBACDlB,SAAS,CAACsB,WAAW,CAACD,GAAG,CAAC;gBAC1BtB,mBAAmB,CAAC,CAAC,CAAC;cACxB;YACF;UACF;QACF,CAAC;QAAA,iBAAAyB,GAAA;UAAA,OAAApB,KAAA,CAAAqB,KAAA,OAAAC,SAAA;QAAA;MAAA,GACH,CAAC;IACH,CAAC,MAAM;MACL1B,SAAS,CAAC,4BAA4B,CAAC;MACvCD,mBAAmB,CAAC,CAAC,CAAC;IACxB;EACF,CAAC;EAAA,gBAzCYL,kBAAkBA,CAAAiC,EAAA;IAAA,OAAAhC,KAAA,CAAA8B,KAAA,OAAAC,SAAA;EAAA;AAAA,GAyC9B"},"metadata":{},"sourceType":"module","externalDependencies":[]}