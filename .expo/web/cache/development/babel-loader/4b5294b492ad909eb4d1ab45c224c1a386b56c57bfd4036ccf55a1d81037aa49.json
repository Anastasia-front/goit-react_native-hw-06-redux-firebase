{"ast":null,"code":"import _asyncToGenerator from \"@babel/runtime/helpers/asyncToGenerator\";\nexport var savePhoto = function savePhoto(photo) {\n  return {\n    type: \"SAVE_PHOTO\",\n    payload: photo\n  };\n};\nexport var saveName = function saveName(name) {\n  return {\n    type: \"SAVE_NAME\",\n    payload: name\n  };\n};\nexport var saveEmail = function saveEmail(email) {\n  return {\n    type: \"SAVE_EMAIL\",\n    payload: email\n  };\n};\nimport { createUserWithEmailAndPassword, signInWithEmailAndPassword, updateProfile, onAuthStateChanged, signOut } from \"firebase/auth\";\nimport { auth } from \"../../firebase/config\";\nimport { updateUserProfile, authStateChange, authSignOut } from \"./authReducer\";\nexport var authSignUpUser = function authSignUpUser(_ref) {\n  var login = _ref.login,\n    email = _ref.email,\n    password = _ref.password,\n    photo = _ref.photo;\n  return function () {\n    var _ref2 = _asyncToGenerator(function* (dispatch) {\n      try {\n        yield createUserWithEmailAndPassword(auth, email, password);\n        var user = auth.currentUser;\n        yield updateProfile(user, {\n          displayName: login,\n          photoURL: photo\n        });\n        var _yield$auth$currentUs = yield auth.currentUser,\n          uid = _yield$auth$currentUs.uid,\n          displayName = _yield$auth$currentUs.displayName,\n          emailBase = _yield$auth$currentUs.email,\n          photoUrlBase = _yield$auth$currentUs.photoURL;\n        var userProfile = {\n          userId: uid,\n          login: displayName,\n          email: emailBase,\n          photoURL: photoUrlBase\n        };\n        dispatch(updateUserProfile(userProfile));\n        return user;\n      } catch (error) {\n        return error.code;\n      }\n    });\n    return function (_x) {\n      return _ref2.apply(this, arguments);\n    };\n  }();\n};\nexport var authSignInUser = function authSignInUser(_ref3) {\n  var email = _ref3.email,\n    password = _ref3.password;\n  return _asyncToGenerator(function* () {\n    try {\n      return yield signInWithEmailAndPassword(auth, email, password);\n    } catch (error) {\n      return error.code;\n    }\n  });\n};\nexport var authUpdateUser = function authUpdateUser(_ref5) {\n  var avatarURL = _ref5.avatarURL;\n  return function () {\n    var _ref6 = _asyncToGenerator(function* (dispatch, state) {\n      try {\n        var user = auth.currentUser;\n        yield updateProfile(user, {\n          photoURL: avatarURL\n        });\n        var _yield$auth$currentUs2 = yield auth.currentUser,\n          uid = _yield$auth$currentUs2.uid,\n          displayName = _yield$auth$currentUs2.displayName,\n          emailBase = _yield$auth$currentUs2.email,\n          photoUrlBase = _yield$auth$currentUs2.photoURL;\n        var userProfile = {\n          userId: uid,\n          login: displayName,\n          email: emailBase,\n          photoURL: photoUrlBase\n        };\n        dispatch(updateUserProfile(userProfile));\n      } catch (error) {\n        return error.code;\n      }\n    });\n    return function (_x2, _x3) {\n      return _ref6.apply(this, arguments);\n    };\n  }();\n};\nexport var authStateChangeUser = function authStateChangeUser() {\n  return function () {\n    var _ref7 = _asyncToGenerator(function* (dispatch, state) {\n      yield onAuthStateChanged(auth, function (user) {\n        if (user) {\n          var userProfile = {\n            userId: user.uid,\n            login: user.displayName,\n            email: user.email,\n            photoURL: user.photoURL\n          };\n          dispatch(authStateChange({\n            stateChange: true\n          }));\n          dispatch(updateUserProfile(userProfile));\n        }\n      });\n    });\n    return function (_x4, _x5) {\n      return _ref7.apply(this, arguments);\n    };\n  }();\n};\nexport var authSignOutUser = function authSignOutUser() {\n  return function () {\n    var _ref8 = _asyncToGenerator(function* (dispatch, state) {\n      yield signOut(auth);\n      dispatch(authSignOut());\n    });\n    return function (_x6, _x7) {\n      return _ref8.apply(this, arguments);\n    };\n  }();\n};","map":{"version":3,"names":["savePhoto","photo","type","payload","saveName","name","saveEmail","email","createUserWithEmailAndPassword","signInWithEmailAndPassword","updateProfile","onAuthStateChanged","signOut","auth","updateUserProfile","authStateChange","authSignOut","authSignUpUser","_ref","login","password","_ref2","_asyncToGenerator","dispatch","user","currentUser","displayName","photoURL","_yield$auth$currentUs","uid","emailBase","photoUrlBase","userProfile","userId","error","code","_x","apply","arguments","authSignInUser","_ref3","authUpdateUser","_ref5","avatarURL","_ref6","state","_yield$auth$currentUs2","_x2","_x3","authStateChangeUser","_ref7","stateChange","_x4","_x5","authSignOutUser","_ref8","_x6","_x7"],"sources":["/Users/Anastasia/Desktop/goit-react_native-hw-06-redux-firebase/src/redux/auth/authOperations.js"],"sourcesContent":["export const savePhoto = (photo) => {\n  return {\n    type: \"SAVE_PHOTO\",\n    payload: photo,\n  };\n};\n\nexport const saveName = (name) => {\n  return {\n    type: \"SAVE_NAME\",\n    payload: name,\n  };\n};\n\nexport const saveEmail = (email) => {\n  return {\n    type: \"SAVE_EMAIL\",\n    payload: email,\n  };\n};\n\nimport {\n  createUserWithEmailAndPassword,\n  signInWithEmailAndPassword,\n  updateProfile,\n  onAuthStateChanged,\n  signOut,\n} from \"firebase/auth\";\nimport { auth } from \"../../firebase/config\";\nimport { updateUserProfile, authStateChange, authSignOut } from \"./authReducer\";\n\nexport const authSignUpUser =\n  ({ login, email, password, photo }) =>\n  async (dispatch) => {\n    try {\n      await createUserWithEmailAndPassword(auth, email, password);\n\n      const user = auth.currentUser;\n\n      await updateProfile(user, {\n        displayName: login,\n        photoURL: photo,\n      });\n\n      const {\n        uid,\n        displayName,\n        email: emailBase,\n        photoURL: photoUrlBase,\n      } = await auth.currentUser;\n\n      const userProfile = {\n        userId: uid,\n        login: displayName,\n        email: emailBase,\n        photoURL: photoUrlBase,\n      };\n\n      dispatch(updateUserProfile(userProfile));\n      return user;\n    } catch (error) {\n      return error.code;\n    }\n  };\n\nexport const authSignInUser =\n  ({ email, password }) =>\n  async () => {\n    try {\n      return await signInWithEmailAndPassword(auth, email, password);\n    } catch (error) {\n      return error.code;\n    }\n  };\n\n// refactor to change avatar or login\nexport const authUpdateUser =\n  ({ avatarURL }) =>\n  async (dispatch, state) => {\n    try {\n      const user = auth.currentUser;\n\n      await updateProfile(user, {\n        photoURL: avatarURL,\n      });\n\n      const {\n        uid,\n        displayName,\n        email: emailBase,\n        photoURL: photoUrlBase,\n      } = await auth.currentUser;\n\n      const userProfile = {\n        userId: uid,\n        login: displayName,\n        email: emailBase,\n        photoURL: photoUrlBase,\n      };\n\n      dispatch(updateUserProfile(userProfile));\n    } catch (error) {\n      return error.code;\n    }\n  };\n\nexport const authStateChangeUser = () => async (dispatch, state) => {\n  await onAuthStateChanged(auth, (user) => {\n    // console.log(user)\n    if (user) {\n      const userProfile = {\n        userId: user.uid,\n        login: user.displayName,\n        email: user.email,\n        photoURL: user.photoURL,\n      };\n\n      dispatch(authStateChange({ stateChange: true }));\n      dispatch(updateUserProfile(userProfile));\n    }\n  });\n};\n\nexport const authSignOutUser = () => async (dispatch, state) => {\n  await signOut(auth);\n\n  dispatch(authSignOut());\n};\n"],"mappings":"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"},"metadata":{},"sourceType":"module","externalDependencies":[]}