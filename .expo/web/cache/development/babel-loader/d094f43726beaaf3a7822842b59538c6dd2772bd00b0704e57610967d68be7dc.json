{"ast":null,"code":"import _defineProperty from \"@babel/runtime/helpers/defineProperty\";\nimport _slicedToArray from \"@babel/runtime/helpers/slicedToArray\";\nfunction ownKeys(object, enumerableOnly) { var keys = Object.keys(object); if (Object.getOwnPropertySymbols) { var symbols = Object.getOwnPropertySymbols(object); enumerableOnly && (symbols = symbols.filter(function (sym) { return Object.getOwnPropertyDescriptor(object, sym).enumerable; })), keys.push.apply(keys, symbols); } return keys; }\nfunction _objectSpread(target) { for (var i = 1; i < arguments.length; i++) { var source = null != arguments[i] ? arguments[i] : {}; i % 2 ? ownKeys(Object(source), !0).forEach(function (key) { _defineProperty(target, key, source[key]); }) : Object.getOwnPropertyDescriptors ? Object.defineProperties(target, Object.getOwnPropertyDescriptors(source)) : ownKeys(Object(source)).forEach(function (key) { Object.defineProperty(target, key, Object.getOwnPropertyDescriptor(source, key)); }); } return target; }\nimport { useState, useEffect } from \"react\";\nimport { useSelector, useDispatch } from \"react-redux\";\nimport { selectorStateComment } from \"../redux/selectors\";\nimport { db } from \"../firebase/config\";\nimport { collection, onSnapshot } from \"firebase/firestore\";\nimport View from \"react-native-web/dist/exports/View\";\nimport FlatList from \"react-native-web/dist/exports/FlatList\";\nimport StyleSheet from \"react-native-web/dist/exports/StyleSheet\";\nimport { Feather } from \"@expo/vector-icons\";\nimport { LoaderScreen } from \"../Screens/LoaderScreen\";\nimport { Post } from \"./Post\";\nimport { askIfQuit } from \"../helpers\";\nimport { jsx as _jsx } from \"react/jsx-runtime\";\nexport var PostsList = function PostsList(_ref) {\n  var navigation = _ref.navigation,\n    route = _ref.route;\n  var dispatch = useDispatch();\n  var _useState = useState(false),\n    _useState2 = _slicedToArray(_useState, 2),\n    isShowLoader = _useState2[0],\n    setIsShowLoader = _useState2[1];\n  var _useState3 = useState([]),\n    _useState4 = _slicedToArray(_useState3, 2),\n    posts = _useState4[0],\n    setPosts = _useState4[1];\n  var comment = useSelector(selectorStateComment);\n  useEffect(function () {\n    setIsShowLoader(true);\n    var dbRef = collection(db, \"posts\");\n    onSnapshot(dbRef, function (data) {\n      var posts = data.docs.map(function (doc) {\n        return _objectSpread({\n          id: doc.id\n        }, doc.data());\n      });\n      var reversPosts = posts.reverse();\n      setPosts(reversPosts);\n      setIsShowLoader(false);\n    }, function () {});\n    navigation.setOptions({\n      headerRight: function headerRight() {\n        return _jsx(Feather, {\n          name: \"log-out\",\n          size: 24,\n          color: styles.headerExitBtn.color,\n          onPress: function onPress() {\n            askIfQuit(dispatch);\n          }\n        });\n      }\n    });\n  }, [navigation, comment]);\n  return _jsx(View, {\n    style: styles.container,\n    children: _jsx(FlatList, {\n      data: posts,\n      keyExtractor: function keyExtractor(_ref2) {\n        var id = _ref2.id;\n        return id;\n      },\n      renderItem: function renderItem(_ref3) {\n        var item = _ref3.item;\n        return _jsx(Post, {\n          post: item,\n          navigation: navigation\n        });\n      }\n    })\n  });\n};\nvar styles = StyleSheet.create({\n  container: {\n    flex: 1,\n    justifyContent: \"center\",\n    paddingHorizontal: 16\n  },\n  headerExitBtn: {\n    color: \"#BDBDBD\"\n  },\n  text: {\n    alignSelf: \"center\"\n  }\n});","map":{"version":3,"names":["useState","useEffect","useSelector","useDispatch","selectorStateComment","db","collection","onSnapshot","View","FlatList","StyleSheet","Feather","LoaderScreen","Post","askIfQuit","jsx","_jsx","PostsList","_ref","navigation","route","dispatch","_useState","_useState2","_slicedToArray","isShowLoader","setIsShowLoader","_useState3","_useState4","posts","setPosts","comment","dbRef","data","docs","map","doc","_objectSpread","id","reversPosts","reverse","setOptions","headerRight","name","size","color","styles","headerExitBtn","onPress","style","container","children","keyExtractor","_ref2","renderItem","_ref3","item","post","create","flex","justifyContent","paddingHorizontal","text","alignSelf"],"sources":["/Users/Anastasia/Desktop/goit-react_native-hw-06-redux-firebase/src/components/PostList.js"],"sourcesContent":["import { useState, useEffect } from \"react\";\nimport { useSelector, useDispatch } from \"react-redux\";\nimport { selectorStateComment } from \"../redux/selectors\";\nimport { db } from \"../firebase/config\";\nimport { collection, onSnapshot } from \"firebase/firestore\";\nimport { View, FlatList, StyleSheet } from \"react-native\";\nimport { Feather } from \"@expo/vector-icons\";\nimport { LoaderScreen } from \"../Screens/LoaderScreen\";\nimport { Post } from \"./Post\";\nimport { askIfQuit } from \"../helpers\";\n\nexport const PostsList = ({ navigation, route }) => {\n  const dispatch = useDispatch();\n  const [isShowLoader, setIsShowLoader] = useState(false);\n  const [posts, setPosts] = useState([]);\n  const comment = useSelector(selectorStateComment);\n\n  useEffect(() => {\n    setIsShowLoader(true);\n    const dbRef = collection(db, \"posts\");\n\n    onSnapshot(\n      dbRef,\n      (data) => {\n        const posts = data.docs.map((doc) => ({ id: doc.id, ...doc.data() }));\n        const reversPosts = posts.reverse();\n        setPosts(reversPosts);\n        setIsShowLoader(false);\n      },\n      () => {}\n    );\n\n    navigation.setOptions({\n      headerRight: () => (\n        <Feather\n          name=\"log-out\"\n          size={24}\n          color={styles.headerExitBtn.color}\n          onPress={() => {\n            askIfQuit(dispatch);\n          }}\n        />\n      ),\n    });\n  }, [navigation, comment]);\n\n  //   if (isShowLoader) {\n  //     return <LoaderScreen />;\n  //   }\n\n  //   if (posts.length === 0) {\n  //     return (\n  //       <View style={styles.container}>\n  //         <Text style={styles.text}>Ще ніхто не зробив фотознімки</Text>\n  //       </View>\n  //     );\n  //   }\n\n  return (\n    <View style={styles.container}>\n      <FlatList\n        data={posts}\n        keyExtractor={({ id }) => id}\n        renderItem={({ item }) => <Post post={item} navigation={navigation} />}\n      />\n    </View>\n  );\n};\n\nconst styles = StyleSheet.create({\n  container: {\n    flex: 1,\n    justifyContent: \"center\",\n    paddingHorizontal: 16,\n  },\n  headerExitBtn: {\n    color: \"#BDBDBD\",\n  },\n  text: {\n    alignSelf: \"center\",\n  },\n});\n"],"mappings":"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"},"metadata":{},"sourceType":"module","externalDependencies":[]}